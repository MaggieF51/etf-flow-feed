      - name: grab farside
        run: |
          curl -s https://farside.co.uk/btc/ -o page.html

          # 取第一行最新日期所在 <tr>，再提取最后一个 <td> 的数字
          FLOW=$(grep -Po '<tr><td[^>]*>[0-9]{2} [A-Z][a-z]{2} 20[0-9]{2}.*?<\/tr>' page.html \
                 | head -1 \
                 | sed -E 's/.*<td[^>]*>([-0-9.()]+)<\/td><\/tr>.*/\1/' \
                 | tr -d '(),')

          [[ -z "$FLOW" ]] && FLOW=0
          echo "{\"flow\":${FLOW}}" > netflow.json
          cat netflow.json

 - name: push to pages
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: .
          publish_branch: main      # 关键：推回 main 分支
